(function(){"use strict";var e={8624:function(e,t,r){var n=r(8935),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[r("div",{staticClass:"d-flex align-center"},[r("v-toolbar-title",{staticClass:"ml-3"},[e._v("SNYK Demo")])],1),r("v-spacer")],1),r("v-main",[r("router-view")],1)],1)},o=[],s={name:"App",data:()=>({})},i=s,l=r(1001),c=(0,l.Z)(i,a,o,!1,null,null,null),d=c.exports,u=r(2809),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-row",[r("v-col",{staticClass:"mx-auto",attrs:{cols:"6"}},[r("br"),r("br"),r("v-row",{staticClass:"text-center"},[r("v-text-field",{attrs:{label:"FL0 Bearer Token",type:"text","prepend-icon":"mdi-lock"},on:{change:e.refresh_org_list},model:{value:e.bearer_token,callback:function(t){e.bearer_token=t},expression:"bearer_token"}})],1),r("v-row",[r("v-select",{attrs:{items:e.organizations,label:"Organization","item-text":"name","item-value":"id"},on:{change:e.fetchProjects},scopedSlots:e._u([e.is_org_loading?{key:"selection",fn:function(){return[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"16"}})]},proxy:!0}:null],null,!0),model:{value:e.selected_org,callback:function(t){e.selected_org=t},expression:"selected_org"}})],1)],1)],1),r("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%"}},[e.selected_project?r("v-btn",{staticClass:"success",on:{click:e.scanProject}},[e._v(" Scan Project ")]):e._e()],1),r("v-row",{staticStyle:{width:"100%",height:"70vh"}},[r("v-col",{attrs:{cols:"3"}},[r("h3",[e._v("Projects")]),e.is_proj_loading?[r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"primary"}})]:[r("br"),r("hr"),r("br"),e._l(e.projects,(function(t,n){return r("div",{key:n},[r("v-btn",{class:e.selected_project&&t.id===e.selected_project.id?"primary":"",attrs:{text:"",small:"",width:"100%"},on:{click:function(r){return e.selectProject(t)}}},[e._v(" "+e._s(t.name)+" ")]),r("br"),r("br")],1)})),0===e.projects.length?[r("v-alert",{staticClass:"ma-0",attrs:{value:!0,type:"info",border:"left"}},[e._v(" Please select an organization. ")])]:e._e()]],2),r("v-col",{attrs:{cols:"4"}},[r("h3",[e._v("Dependencies")]),r("br"),r("hr"),r("br"),r("v-data-table",{attrs:{headers:e.headers,items:e.items}},[r("template",{slot:"no-data"},[e.is_deps_loading?[r("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}})]:e.selected_project?[r("v-alert",{staticClass:"ma-0",attrs:{value:!0,type:"info",icon:"mdi-information",border:"left"}},[e._v(" No dependencies found. ")])]:[r("v-alert",{staticClass:"ma-0",attrs:{value:!0,type:"info",border:"left"}},[e._v(" Please select a project. ")])]],2)],2)],1),r("v-col",[r("h3",[e._v("Scan Results")]),r("br"),r("hr"),r("br"),r("div",[e.project_scanned?e.vulns.length>0?r("v-card",[r("v-card-title",[r("span",{staticClass:"subheading"},[e._v("Vulnerabilities found")])]),r("v-card-text",[r("v-data-table",{attrs:{dense:"","disable-pagination":"","hide-default-footer":"",headers:e.vuln_headers,items:e.vulns}})],1)],1):e.vulns_done_loading?r("v-card",[r("v-card-title",[r("span",{staticClass:"subheading"},[e._v("No vulnerabilities found")])])],1):e._e():r("v-card",[r("v-alert",{staticClass:"ma-0",attrs:{value:!0,type:"info",border:"left"}},[e._v(" Please select a project and click Scan Project. ")])],1)],1)])],1)],1)},v=[],_=r(6166),h=r.n(_),f={name:"HomeView",components:{},data(){return{bearer_token:"",workspace_id:"",selected_org:null,organizations:[],projects:[],selected_project:null,project_scanned:!1,is_org_loading:!1,is_deps_loading:!1,is_proj_loading:!1,is_vulns_loading:!1,vulns_done_loading:!0,vulns:[],vuln_headers:[{text:"Package",value:"package"},{text:"Severity",value:"severity"},{text:"Title",value:"title"},{text:"Fixed in",value:"fixedIn"}],headers:[{value:"name",text:"Name"},{value:"version",text:"Version"}],items:[]}},mounted(){this.bearer_token=localStorage.getItem("bearer_token"),this.refresh_org_list()},methods:{refresh_org_list(){this.is_org_loading=!0,h().get("https://portal.fl0.com/api/me",{headers:{Authorization:`${this.bearer_token}`}}).then((e=>{localStorage.setItem("bearer_token",this.bearer_token),this.organizations=e.data.organizations,this.is_org_loading=!1})).catch((e=>{console.log(e)}))},fetchProjects(){this.selected_org&&(this.is_proj_loading=!0,h().get(`https://portal.fl0.com/api/me/organizations/${this.selected_org}/workspaces`,{headers:{Authorization:`${this.bearer_token}`}}).then((e=>{this.projects=e.data.workspaces,this.is_proj_loading=!1})).catch((e=>{console.log(e),this.is_proj_loading=!1})))},selectProject(e){this.selected_project=e,this.fetchDependencies(),this.project_scanned=!1},fetchDependencies(){this.selected_project&&(this.is_deps_loading=!0,h().get(`https://portal.fl0.com/api/workspaces/${this.selected_project.id}/nodeServer`,{headers:{Authorization:`${this.bearer_token}`}}).then((e=>{this.items=e.data.npmPackages,this.is_deps_loading=!1})).catch((e=>{this.is_deps_loading=!1,console.log(e)})))},scanProject(){this.selected_project&&(this.is_vulns_loading=!0,this.vulns_done_loading=!1,this.items.forEach((e=>{h().get(`https://api.fl0.com/eliastest/uat/snyktest/flows/scan?name=${e.name}&version=${e.version}`).then((e=>{let t=e.data.map((e=>({package:`${e.name}@${e.version}`,severity:e.severityWithCritical,title:e.title,fixedIn:e.fixedIn?e.fixedIn:""})));this.vulns=this.vulns.concat(t),this.is_vulns_loading=!1})).catch((e=>{console.log(e)})).finally((()=>{this.vulns_done_loading=!0}))})),this.project_scanned=!0)}},watch:{bearer_token:function(e){localStorage.setItem("bearer_token",e)},workspace_id:function(e){localStorage.setItem("workspace_id",e)}}},g=f,m=(0,l.Z)(g,p,v,!1,null,null,null),b=m.exports;n["default"].use(u.Z);const y=[{path:"/",name:"home",component:b}],j=new u.Z({mode:"history",base:"/snyk-demo/",routes:y});var k=j,w=r(4665);n["default"].use(w.ZP);var x=new w.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),P=r(8209),S=r.n(P);r(243);n["default"].use(S());var C=new(S())({theme:{themes:{light:{primary:"#007BFF",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});n["default"].config.productionTip=!1,new n["default"]({router:k,store:x,vuetify:C,render:e=>e(d)}).$mount("#app")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,n,a,o){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],o=e[d][2];for(var i=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,a,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,s=n[0],i=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var d=l(r)}for(t&&t(n);c<s.length;c++)o=s[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},n=self["webpackChunksnyk_demo"]=self["webpackChunksnyk_demo"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(8624)}));n=r.O(n)})();
//# sourceMappingURL=app.9e780fe4.js.map